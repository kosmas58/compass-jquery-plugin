(function(b){var p=b.tmpl.complete,l=b.fn.domManip;b.tmpl.complete=function(c){var a;p(c);for(a in c){a=c[a];a.addedTmplItems&&b.inArray(a,a.addedTmplItems)===-1&&a.addedTmplItems.push(a)}for(a in c){a=c[a];a.rendered&&a.rendered(a)}};b.extend({tmplCmd:function(c,a,d){function f(h,g){for(var m=[],j,k,q=g.length,n,o=0,r=h.length;o<r;){n=h[o++];for(k=0;k<q;){j=g[k++];j.data===n&&m.push(j)}}return m}var i=[],e;a=b.isArray(a)?a:[a];switch(c){case "find":return f(a,d);case "replace":a.reverse()}b.each(d?
f(a,d):a,function(h,g){coll=g.nodes;switch(c){case "update":g.update();break;case "remove":b(coll).remove();d&&d.splice(b.inArray(g,d),1);break;case "replace":e=e?b(coll).insertBefore(e)[0]:b(coll).appendTo(coll[0].parentNode)[0];i.unshift(g)}});return i}});b.fn.extend({domManip:function(c,a,d){var f=c[1],i=c[0],e;if(c.length>=2&&typeof f==="object"&&!f.nodeType&&!(f instanceof b)){e=b.makeArray(arguments);e[0]=[b.tmpl(b.template(i),f,c[2],c[3])];e[2]=function(h){b.tmpl.afterManip(this,h,d)};return l.apply(this,
e)}return l.apply(this,arguments)}})})(jQuery);
