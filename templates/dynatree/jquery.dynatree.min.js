var _canLog=!0;function _log(f){if(_canLog){var k=Array.prototype.slice.apply(arguments,[1]),l=new Date,l=l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"."+l.getMilliseconds();k[0]=l+" - "+k[0];try{switch(f){case "info":window.console.info.apply(window.console,k);break;case "warn":window.console.warn.apply(window.console,k);break;default:window.console.log.apply(window.console,k)}}catch(n){window.console||(_canLog=!1)}}}
function logMsg(){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}var getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;
(function(f){function k(a){for(var b=5;a&&b--;){if(a.dtnode)return a.dtnode;a=a.parentNode}return null}function l(a){var b=a.options.dnd||null;b&&(b.onDragStart||b.onDrop)&&r();b&&b.onDragStart&&a.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,connectToDynatree:!0,helper:function(a){var b=k(a.target);return b.tree._onDragEvent("helper",b,null,a,null,null)},_last:null});b&&b.onDrop&&a.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}
var n={create:function(){return function(){this.initialize.apply(this,arguments)}}},o=n.create();o.prototype={initialize:function(a,b,c){this.parent=a;this.tree=b;typeof c==="string"&&(c={title:c});if(c.key===void 0)c.key="_"+b._nodeCount++;this.data=f.extend({},f.ui.dynatree.nodedatadefaults,c);this.childList=this.ul=this.span=this.li=null;this.bSelected=this.bExpanded=this.hasSubSel=this.isLoading=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(a,
b){var c=f.extend({},this.data);c.activate=this.tree.activeNode===this;c.focus=this.tree.focusNode===this;c.expand=this.bExpanded;c.select=this.bSelected;b&&b(c);if(a&&this.childList){c.children=[];for(var d=0,e=this.childList.length;d<e;d++)c.children.push(this.childList[d].toDict(!0,b))}else delete c.children;return c},fromDict:function(a){var b=a.children;b===void 0?(this.data=f.extend(this.data,a),this.render()):(a=f.extend({},a),a.children=void 0,this.data=f.extend(this.data,a),this.removeChildren(),
this.addChild(b))},_getInnerHtml:function(){var a=this.tree,b=a.options,c=a.cache,d=this.getLevel(),e=this.data,g="";d<b.minExpandLevel?d>1&&(g+=c.tagConnector):g+=this.hasChildren()!==!1?c.tagExpander:c.tagConnector;b.checkbox&&e.hideCheckbox!==!0&&!e.isStatusNode&&(g+=c.tagCheckbox);e.icon?g+="<img src='"+b.imagePath+e.icon+"' alt='' />":e.icon===!1||(g+=c.tagNodeIcon);c="";b.onCustomRender&&(c=b.onCustomRender.call(a,this)||"");c||(a=e.tooltip?" title='"+e.tooltip+"'":"",c=b.noLink||e.noLink?"<span style='display: inline-block;' class='"+
b.classNames.title+"'"+a+">"+e.title+"</span>":"<a href='#' class='"+b.classNames.title+"'"+a+">"+e.title+"</a>");g+=c;return g},_fixOrder:function(){var a=this.childList;if(a&&this.ul)for(var b=this.ul.firstChild,c=0,d=a.length-1;c<d;c++){var e=a[c],g=b.dtnode;e!==g?(this.tree.logDebug("_fixOrder: mismatch at index "+c+": "+e+" != "+g),this.ul.insertBefore(e.li,g.li)):b=b.nextSibling}},render:function(a,b){var c=this.tree,d=this.parent,e=this.data,g=c.options,h=g.classNames,i=this.isLastSibling();
if(!d&&!this.ul)this.li=this.span=null,this.ul=document.createElement("ul"),this.ul.className=g.minExpandLevel>1?h.container+" "+h.noConnector:h.container;else if(d){if(!this.li){this.li=document.createElement("li");this.li.dtnode=this;if(e.key&&g.generateIds)this.li.id=g.idPrefix+e.key;this.span=document.createElement("span");this.span.className=h.title;this.li.appendChild(this.span);if(!d.ul)d.ul=document.createElement("ul"),d.ul.style.display="none",d.li.appendChild(d.ul);d.ul.appendChild(this.li)}this.span.innerHTML=
this._getInnerHtml();var j=[];j.push(h.node);e.isFolder&&j.push(h.folder);this.bExpanded&&j.push(h.expanded);this.hasChildren()!==!1&&j.push(h.hasChildren);e.isLazy&&this.childList===null&&j.push(h.lazy);i&&j.push(h.lastsib);this.bSelected&&j.push(h.selected);this.hasSubSel&&j.push(h.partsel);c.activeNode===this&&j.push(h.active);e.addClass&&j.push(e.addClass);j.push(h.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(e.isLazy&&this.childList===null?"d":"")+(i?"l":""));j.push(h.combinedIconPrefix+
(this.bExpanded?"e":"c")+(e.isFolder?"f":""));this.span.className=j.join(" ");this.li.className=i?h.lastsib:"";g.onRender&&g.onRender.call(c,this,this.span)}if((this.bExpanded||b===!0)&&this.childList){c=0;for(e=this.childList.length;c<e;c++)this.childList[c].render(!1,b);this._fixOrder()}if(this.ul)c=this.ul.style.display==="none",e=!!this.bExpanded,a&&g.fx&&c===e?(d=g.fx.duration||200,f(this.ul).animate(g.fx,d)):this.ul.style.display=this.bExpanded||!d?"":"none"},getKeyPath:function(a){var b=[];
this.visitParents(function(a){a.parent&&b.unshift(a.data.key)},!a);return"/"+b.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return this.childList},hasChildren:function(){if(this.data.isLazy){if(this.childList===null||this.childList===void 0)return;else if(this.childList.length===0)return!1;else if(this.childList.length===1&&this.childList[0].isStatusNode())return;return!0}return!!this.childList},isFirstSibling:function(){var a=this.parent;
return!a||a.childList[0]===this},isLastSibling:function(){var a=this.parent;return!a||a.childList[a.childList.length-1]===this},getPrevSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,b=1,c=a.length;b<c;b++)if(a[b]===this)return a[b-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,b=0,c=a.length-1;b<c;b++)if(a[b]===this)return a[b+1];return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(a){return this.parent&&
this.parent===a},isDescendantOf:function(a){if(!a)return!1;for(var b=this.parent;b;){if(b===a)return!0;b=b.parent}return!1},countChildren:function(){var a=this.childList;if(!a)return 0;for(var b=a.length,c=0,d=b;c<d;c++)b+=a[c].countChildren();return b},sortChildren:function(a,b){var c=this.childList;if(c){a=a||function(a,b){return a.data.title===b.data.title?0:a.data.title>b.data.title?1:-1};c.sort(a);if(b)for(var d=0,e=c.length;d<e;d++)c[d].childList&&c[d].sortChildren(a,"$norender$");b!=="$norender$"&&
this.render()}},_setStatusNode:function(a){var b=this.childList?this.childList[0]:null;if(a)b?(a.isStatusNode=!0,a.key="_statusNode",b.data=a,b.render()):(a.isStatusNode=!0,a.key="_statusNode",this.addChild(a));else if(b&&b.isStatusNode()){try{this.ul&&this.ul.removeChild(b.li)}catch(c){}this.childList.length===1?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(a,b){var c=b&&b.tooltip?b.tooltip:null,d=b&&b.info?" ("+b.info+")":"";switch(a){case DTNodeStatus_Ok:this._setStatusNode(null);
f(this.span).removeClass(this.tree.options.classNames.nodeLoading);this.isLoading=!1;this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this.isLoading=!0;f(this.span).addClass(this.tree.options.classNames.nodeLoading);this.parent||this._setStatusNode({title:this.tree.options.strings.loading+d,tooltip:c,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this.isLoading=
!1;this._setStatusNode({title:this.tree.options.strings.loadError+d,tooltip:c,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+a+"'.";}},_parentList:function(a,b){for(var c=[],d=b?this:this.parent;d;)(a||d.parent)&&c.unshift(d),d=d.parent;return c},getLevel:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},_getTypeForOuterNodeEvent:function(a){var b=this.tree.options.classNames,c=a.target;if(c.className.indexOf(b.node)<0)return null;for(var d=
a.pageX-c.offsetLeft,a=a.pageY-c.offsetTop,e=0,g=c.childNodes.length;e<g;e++){var f=c.childNodes[e],i=f.offsetLeft-c.offsetLeft,j=f.offsetTop-c.offsetTop,s=f.clientWidth,k=f.clientHeight;if(d>=i&&d<=i+s&&a>=j&&a<=j+k)if(f.className==b.title)return"title";else if(f.className==b.expander)return"expander";else if(f.className==b.checkbox)return"checkbox";else if(f.className==b.nodeIcon)return"icon"}return"prefix"},getEventTargetType:function(a){var b=a&&a.target?a.target.className:"",c=this.tree.options.classNames;
if(b===c.title)return"title";else if(b===c.expander)return"expander";else if(b===c.checkbox)return"checkbox";else if(b===c.nodeIcon)return"icon";else if(b===c.empty||b===c.vline||b===c.connector)return"prefix";else if(b.indexOf(c.node)>=0)return this._getTypeForOuterNodeEvent(a);return null},isVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;b<c;b++)if(!a[b].bExpanded)return!1;return!0},makeVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;b<c;b++)a[b]._expand(!0)},
focus:function(){this.makeVisible();try{f(this.span).find(">a").focus()}catch(a){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(a,b){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",a,b,this);var c=this.tree.options;if(!this.data.isStatusNode&&(!b||!(c.onQueryActivate&&c.onQueryActivate.call(this.tree,a,this)===!1)))if(a){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}c.activeVisible&&this.makeVisible();
this.tree.activeNode=this;c.persist&&f.cookie(c.cookieId+"-active",this.data.key,c.cookie);this.tree.persistence.activeKey=this.data.key;f(this.span).addClass(c.classNames.active);b&&c.onActivate&&c.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this&&!(c.onQueryActivate&&c.onQueryActivate.call(this.tree,!1,this)===!1))f(this.span).removeClass(c.classNames.active),c.persist&&f.cookie(c.cookieId+"-active","",c.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,b&&
c.onDeactivate&&c.onDeactivate.call(this.tree,this)},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var a=!0,b=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:a=!1;b=!0;break;case 3:a=b=!0}this.parent===null&&(b=!1);b&&(this.toggleExpand(),this.focus());a&&this.activate()},_setSubSel:function(a){a?(this.hasSubSel=
!0,f(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,f(this.span).removeClass(this.tree.options.classNames.partsel))},_fixSelectionState:function(){var a,b,c;if(this.bSelected){this.visit(function(a){a.parent._setSubSel(!0);a._select(!0,!1,!1)});for(a=this.parent;a;){a._setSubSel(!0);var d=!0;b=0;for(c=a.childList.length;b<c;b++){var e=a.childList[b];if(!e.bSelected&&!e.data.isStatusNode){d=!1;break}}d&&a._select(!0,!1,!1);a=a.parent}}else{this._setSubSel(!1);this.visit(function(a){a._setSubSel(!1);
a._select(!1,!1,!1)});for(a=this.parent;a;){a._select(!1,!1,!1);d=!1;b=0;for(c=a.childList.length;b<c;b++)if(a.childList[b].bSelected||a.childList[b].hasSubSel){d=!0;break}a._setSubSel(d);a=a.parent}}},_select:function(a,b,c){var d=this.tree.options;if(!this.data.isStatusNode&&this.bSelected!==a&&(!b||!(d.onQuerySelect&&d.onQuerySelect.call(this.tree,a,this)===!1)))d.selectMode==1&&a&&this.tree.visit(function(a){if(a.bSelected)return a._select(!1,!1,!1),!1}),(this.bSelected=a)?(d.persist&&this.tree.persistence.addSelect(this.data.key),
f(this.span).addClass(d.classNames.selected),c&&d.selectMode===3&&this._fixSelectionState(),b&&d.onSelect&&d.onSelect.call(this.tree,!0,this)):(d.persist&&this.tree.persistence.clearSelect(this.data.key),f(this.span).removeClass(d.classNames.selected),c&&d.selectMode===3&&this._fixSelectionState(),b&&d.onSelect&&d.onSelect.call(this.tree,!1,this))},select:function(a){if(this.data.unselectable)return this.bSelected;return this._select(a!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},
isSelected:function(){return this.bSelected},_loadContent:function(){try{var a=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this);this.setLazyNodeStatus(DTNodeStatus_Loading);!0===a.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(b){this.tree.logWarning("_loadContent: failed - %o",b),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+b})}},_expand:function(a,b){if(this.bExpanded===a)this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",
a,this);else{this.tree.logDebug("dtnode._expand(%o) - %o",a,this);var c=this.tree.options;if(!a&&this.getLevel()<c.minExpandLevel)this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",a,this);else if(!(c.onQueryExpand&&c.onQueryExpand.call(this.tree,a,this)===!1)){this.bExpanded=a;c.persist&&(a?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));this.render(!(this.data.isLazy&&this.childList===null)&&!this.isLoading&&!b);if(this.bExpanded&&this.parent&&
c.autoCollapse)for(var d=this._parentList(!1,!0),e=0,f=d.length;e<f;e++)d[e].collapseSiblings();c.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate();a&&this.data.isLazy&&this.childList===null&&!this.isLoading?this._loadContent():c.onExpand&&c.onExpand.call(this.tree,a,this)}}},expand:function(a){a=a!==!1;if(this.childList||this.data.isLazy||!a)(this.parent!==null||a)&&this._expand(a)},scheduleAction:function(a,b){this.tree.timer&&(clearTimeout(this.tree.timer),
this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var c=this;switch(a){case "cancel":break;case "expand":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger expand");c.expand(!0)},b);break;case "activate":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger activate");c.activate()},b);break;default:throw"Invalid mode "+a;}this.tree.logDebug("setTimeout(%s, %s): %s",a,b,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent!==
null)for(var a=this.parent.childList,b=0,c=a.length;b<c;b++)a[b]!==this&&a[b].bExpanded&&a[b]._expand(!1)},_onClick:function(a){var b=this.getEventTargetType(a);if(b==="expander")this.toggleExpand(),this.focus();else if(b==="checkbox")this.toggleSelect(),this.focus();else if(this._userActivate(),b=this.span.getElementsByTagName("a"),b[0])f.browser.msie||b[0].focus();else return!0;a.preventDefault()},_onDblClick:function(){},_onKeydown:function(a){var b=!0,c;switch(a.which){case 107:case 187:this.bExpanded||
this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:!this.bExpanded&&(this.childList||this.data.isLazy)?(this.toggleExpand(),this.focus()):this.childList&&this.childList[0].focus();break;case 38:for(c=this.getPrevSibling();c&&c.bExpanded&&c.childList;)c=c.childList[c.childList.length-
1];if(!c&&this.parent&&this.parent.parent)c=this.parent;c&&c.focus();break;case 40:if(this.bExpanded&&this.childList)c=this.childList[0];else for(var d=this._parentList(!1,!0),e=d.length-1;e>=0;e--)if(c=d[e].getNextSibling())break;c&&c.focus();break;default:b=!1}b&&a.preventDefault()},_onKeypress:function(){},_onFocus:function(a){var b=this.tree.options;if(a.type=="blur"||a.type=="focusout")b.onBlur&&b.onBlur.call(this.tree,this),this.tree.tnFocused&&f(this.tree.tnFocused.span).removeClass(b.classNames.focused),
this.tree.tnFocused=null,b.persist&&f.cookie(b.cookieId+"-focus","",b.cookie);else if(a.type=="focus"||a.type=="focusin")this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),f(this.tree.tnFocused.span).removeClass(b.classNames.focused)),this.tree.tnFocused=this,b.onFocus&&b.onFocus.call(this.tree,this),f(this.tree.tnFocused.span).addClass(b.classNames.focused),b.persist&&f.cookie(b.cookieId+"-focus",this.data.key,b.cookie)},
visit:function(a,b){var c=!0;if(b===!0&&(c=a(this),c===!1||c=="skip"))return c;if(this.childList)for(var d=0,e=this.childList.length;d<e;d++)if(c=this.childList[d].visit(a,!0),c===!1)break;return c},visitParents:function(a,b){if(b&&a(this)===!1)return!1;for(var c=this.parent;c;){if(a(c)===!1)return!1;c=c.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(a){var b=this.childList;if(b.length==1){if(a!==
b[0])throw"removeChild: invalid child";return this.removeChildren()}a===this.tree.activeNode&&a.deactivate();this.tree.options.persist&&(a.bSelected&&this.tree.persistence.clearSelect(a.data.key),a.bExpanded&&this.tree.persistence.clearExpand(a.data.key));a.removeChildren(!0);this.ul.removeChild(a.li);for(var c=0,d=b.length;c<d;c++)if(b[c]===a){this.childList.splice(c,1);break}},removeChildren:function(a,b){this.tree.logDebug("%s.removeChildren(%o)",this,a);var c=this.tree,d=this.childList;if(d){for(var e=
0,f=d.length;e<f;e++){var h=d[e];h===c.activeNode&&!b&&h.deactivate();this.tree.options.persist&&!b&&(h.bSelected&&this.tree.persistence.clearSelect(h.data.key),h.bExpanded&&this.tree.persistence.clearExpand(h.data.key));h.removeChildren(!0,b);this.ul&&this.ul.removeChild(h.li)}this.childList=null}if(!a)this.isLoading=!1,this.render()},setTitle:function(a){this.fromDict({title:a})},reload:function(){throw"Use reloadChildren() instead";},reloadChildren:function(a){if(this.parent===null)throw"Use tree.reload() instead";
else if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(a){var b=this,c="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(c,function(d,e,f){b.tree.$tree.unbind(c);b.tree.logDebug("loaded %o, %o, %o",d,e,f);if(e!==b)throw"got invalid load event";a.call(b.tree,e,f)})}this.removeChildren();this._loadContent()},_loadKeyPath:function(a,b){var c=this.tree;c.logDebug("%s._loadKeyPath(%s)",this,a);if(a==="")throw"Key path must not be empty";var d=
a.split(c.options.keyPathSeparator);if(d[0]==="")throw"Key path must be relative (don't start with '/')";for(var e=d.shift(),f=0,h=this.childList.length;f<h;f++){var i=this.childList[f];if(i.data.key===e){if(d.length===0)b.call(c,i,"ok");else if(i.data.isLazy&&(i.childList===null||i.childList===void 0)){c.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,a,i);var j=this;i.reloadChildren(function(e,f){f?(c.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",e,a,e),b.call(c,i,"loaded"),e._loadKeyPath(d.join(c.options.keyPathSeparator),
b)):(c.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",j,a),b.call(c,i,"error"))})}else b.call(c,i,"loaded"),i._loadKeyPath(d.join(c.options.keyPathSeparator),b);return}}c.logWarning("Node not found: "+e)},resetLazy:function(){if(this.parent===null)throw"Use tree.reload() instead";else if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1);this.removeChildren()},_addChildNode:function(a,b){var c=this.tree,d=c.options,e=c.persistence;a.parent=this;this.childList===
null?this.childList=[]:b||this.childList.length>0&&f(this.childList[this.childList.length-1].span).removeClass(d.classNames.lastsib);if(b){var g=f.inArray(b,this.childList);if(g<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(g,0,a)}else this.childList.push(a);g=c.isInitializing();if(d.persist&&e.cookiesFound&&g){if(e.activeKey==a.data.key)c.activeNode=a;if(e.focusedKey==a.data.key)c.focusNode=a;a.bExpanded=f.inArray(a.data.key,e.expandedKeyList)>=0;a.bSelected=f.inArray(a.data.key,
e.selectedKeyList)>=0}else{if(a.data.activate&&(c.activeNode=a,d.persist))e.activeKey=a.data.key;if(a.data.focus&&(c.focusNode=a,d.persist))e.focusedKey=a.data.key;a.bExpanded=a.data.expand===!0;a.bExpanded&&d.persist&&e.addExpand(a.data.key);a.bSelected=a.data.select===!0;a.bSelected&&d.persist&&e.addSelect(a.data.key)}if(d.minExpandLevel>=a.getLevel())this.bExpanded=!0;if(a.bSelected&&d.selectMode==3)for(d=this;d;)d.hasSubSel||d._setSubSel(!0),d=d.parent;c.bEnableUpdate&&this.render();return a},
addChild:function(a,b){if(typeof a=="string")throw"Invalid data type for "+a;else if(!a||a.length===0)return;else if(a instanceof o)return this._addChildNode(a,b);a.length||(a=[a]);for(var c=this.tree.enableUpdate(!1),d=null,e=0,f=a.length;e<f;e++){var h=a[e],i=this._addChildNode(new o(this,this.tree,h),b);d||(d=i);h.children&&i.addChild(h.children,null)}this.tree.enableUpdate(c);return d},append:function(a){this.tree.logWarning("node.append() is deprecated (use node.addChild() instead).");return this.addChild(a,
null)},appendAjax:function(a){var b=this;this.removeChildren(!1,!0);this.setLazyNodeStatus(DTNodeStatus_Loading);if(a.debugLazyDelay){var c=a.debugLazyDelay;a.debugLazyDelay=0;this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+c);setTimeout(function(){b.appendAjax(a)},c)}else{var d=a.success,e=a.error,g="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,h=f.extend({},this.tree.options.ajaxDefaults,a,{success:function(a){var c=b.tree.phase;b.tree.phase="init";h.postProcess&&
(a=h.postProcess.call(this,a,this.dataType));(!f.isArray(a)||a.length!==0)&&b.addChild(a,null);b.tree.phase="postInit";d&&d.call(h,b);b.tree.logDebug("trigger "+g);b.tree.$tree.trigger(g,[b,!0]);b.tree.phase=c;b.setLazyNodeStatus(DTNodeStatus_Ok);if(f.isArray(a)&&a.length===0)b.childList=[],b.render()},error:function(a,c,d){b.tree.logWarning("appendAjax failed:",c,":\n",a,"\n",d);e&&e.call(h,b,a,c,d);b.tree.$tree.trigger(g,[b,!1]);b.setLazyNodeStatus(DTNodeStatus_Error,{info:c,tooltip:""+d})}});f.ajax(h)}},
move:function(a,b){var c;if(this!==a){if(!this.parent)throw"Cannot move system root";if(b===void 0||b=="over")b="child";var d=this.parent,e=b==="child"?a:a.parent;if(e.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(this.parent.childList.length==1)this.parent.childList=null,this.parent.bExpanded=!1;else{c=f.inArray(this,this.parent.childList);if(c<0)throw"Internal error";this.parent.childList.splice(c,1)}this.parent.ul.removeChild(this.li);this.parent=e;if(e.hasChildren())switch(b){case "child":e.childList.push(this);
break;case "before":c=f.inArray(a,e.childList);if(c<0)throw"Internal error";e.childList.splice(c,0,this);break;case "after":c=f.inArray(a,e.childList);if(c<0)throw"Internal error";e.childList.splice(c+1,0,this);break;default:throw"Invalid mode "+b;}else if(e.childList=[this],!e.ul)e.ul=document.createElement("ul"),e.ul.style.display="none",e.li.appendChild(e.ul);e.ul.appendChild(this.li);if(this.tree!==a.tree)throw this.visit(function(b){b.tree=a.tree},null,!0),"Not yet implemented.";d.isDescendantOf(e)||
d.render();e.isDescendantOf(d)||e.render()}},lastentry:void 0};var m=n.create();m._getTreePersistData=function(a,b){var c=new m(a,b);c.read();return c.toDict()};getDynaTreePersistData=m._getTreePersistData;m.prototype={initialize:function(a,b){if(a===void 0)a=f.ui.dynatree.prototype.options.cookieId;b=f.extend({},f.ui.dynatree.prototype.options.cookie,b);this.cookieId=a;this.cookieOpts=b;this.cookiesFound=void 0;this.selectedKeyList=this.expandedKeyList=this.focusedKey=this.activeKey=null},_log:function(){Array.prototype.unshift.apply(arguments,
["debug"]);_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var a=f.cookie(this.cookieId+"-active");this.activeKey=a===null?"":a;if(a!==null)this.cookiesFound=!0;a=f.cookie(this.cookieId+"-focus");this.focusedKey=a===null?"":a;if(a!==null)this.cookiesFound=!0;a=f.cookie(this.cookieId+"-expand");this.expandedKeyList=a===null?[]:a.split(",");if(a!==null)this.cookiesFound=!0;a=f.cookie(this.cookieId+"-select");this.selectedKeyList=a===null?[]:a.split(",");if(a!==null)this.cookiesFound=
!0},write:function(){f.cookie(this.cookieId+"-active",this.activeKey===null?"":this.activeKey,this.cookieOpts);f.cookie(this.cookieId+"-focus",this.focusedKey===null?"":this.focusedKey,this.cookieOpts);f.cookie(this.cookieId+"-expand",this.expandedKeyList===null?"":this.expandedKeyList.join(","),this.cookieOpts);f.cookie(this.cookieId+"-select",this.selectedKeyList===null?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(a){f.inArray(a,this.expandedKeyList)<0&&(this.expandedKeyList.push(a),
f.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(a){a=f.inArray(a,this.expandedKeyList);a>=0&&(this.expandedKeyList.splice(a,1),f.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(a){f.inArray(a,this.selectedKeyList)<0&&(this.selectedKeyList.push(a),f.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(a){a=f.inArray(a,this.selectedKeyList);a>=
0&&(this.selectedKeyList.splice(a,1),f.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var p=n.create();p.version="$Version:$";p.prototype={initialize:function(a){this.phase="init";this.$widget=a;this.options=a.options;
this.$tree=a.element;this.timer=null;this.divTree=this.$tree.get(0);l(this)},_load:function(a){var b=this.options,c=this;this.bEnableUpdate=!0;this._nodeCount=1;this.focusNode=this.activeNode=null;b.rootVisible!==void 0&&this.logWarning("Option 'rootVisible' is no longer supported.");if(b.minExpandLevel<1)this.logWarning("Option 'minExpandLevel' must be >= 1."),b.minExpandLevel=1;if(b.classNames!==f.ui.dynatree.prototype.options.classNames)b.classNames=f.extend({},f.ui.dynatree.prototype.options.classNames,
b.classNames);if(b.ajaxDefaults!==f.ui.dynatree.prototype.options.ajaxDefaults)b.ajaxDefaults=f.extend({},f.ui.dynatree.prototype.options.ajaxDefaults,b.ajaxDefaults);if(b.dnd!==f.ui.dynatree.prototype.options.dnd)b.dnd=f.extend({},f.ui.dynatree.prototype.options.dnd,b.dnd);b.imagePath||f("script").each(function(){if(this.src.search(/.*dynatree[^\/]*\.js$/i)>=0)return b.imagePath=this.src.indexOf("/")>=0?this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":"skin/",c.logDebug("Guessing imagePath from '%s': '%s'",
this.src,b.imagePath),!1});this.persistence=new m(b.cookieId,b.cookie);b.persist&&(f.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read());this.logDebug("DynaTree.persistence: %o",this.persistence.toDict());this.cache={tagEmpty:"<span class='"+b.classNames.empty+"'></span>",tagVline:"<span class='"+b.classNames.vline+"'></span>",tagExpander:"<span class='"+b.classNames.expander+"'></span>",tagConnector:"<span class='"+b.classNames.connector+"'></span>",
tagNodeIcon:"<span class='"+b.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+b.classNames.checkbox+"'></span>",lastentry:void 0};(b.children||b.initAjax&&b.initAjax.url||b.initId)&&f(this.divTree).empty();var d=this.$tree.find(">ul:first").hide();this.tnRoot=new o(null,this,{});this.tnRoot.bExpanded=!0;this.tnRoot.render();this.divTree.appendChild(this.tnRoot.ul);var e=this.tnRoot,g=b.persist&&this.persistence.isReloading(),h=!1,i=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure...");
b.children?e.addChild(b.children):b.initAjax&&b.initAjax.url?(h=!0,e.data.isLazy=!0,this._reloadAjax(a)):b.initId?this._createFromTag(e,f("#"+b.initId)):(this._createFromTag(e,d),d.remove());this._checkConsistency();this.logDebug("Dynatree._load(): render nodes...");this.enableUpdate(i);this.logDebug("Dynatree._load(): bind events...");this.$widget.bind();this.logDebug("Dynatree._load(): postInit...");this.phase="postInit";b.persist&&this.persistence.write();this.focusNode&&this.focusNode.isVisible()&&
(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus());!h&&b.onPostInit&&b.onPostInit.call(this,g,!1);this.phase="idle"},_reloadAjax:function(a){var b=this.options;if(!b.initAjax||!b.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var c=this.persistence,d=f.extend({},b.initAjax);if(d.addActiveKey)d.data.activeKey=c.activeKey;if(d.addFocusedKey)d.data.focusedKey=c.focusedKey;if(d.addExpandedKeyList)d.data.expandedKeyList=c.expandedKeyList.join(",");if(d.addSelectedKeyList)d.data.selectedKeyList=
c.selectedKeyList.join(",");if(b.onPostInit){d.success&&this.logWarning("initAjax: success callback is ignored when onPostInit was specified.");d.error&&this.logWarning("initAjax: error callback is ignored when onPostInit was specified.");var e=c.isReloading();d.success=function(c){b.onPostInit.call(c.tree,e,!1);a&&a.call(c.tree,"ok")};d.error=function(c){b.onPostInit.call(c.tree,e,!0);a&&a.call(c.tree,"error")}}this.logDebug("Dynatree._init(): send Ajax request...");this.tnRoot.appendAjax(d)},toString:function(){return"Dynatree '"+
this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(a){for(var a=this.getSelectedNodes(a),b=this.$tree.attr("name")||this.$tree.attr("id"),c=[],d=0,e=a.length;d<e;d++)c.push({name:b,value:a[d].data.key});return c},getPersistData:function(){return this.persistence.toDict()},logDebug:function(){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,
["info"]),_log.apply(this,arguments))},logWarning:function(){Array.prototype.unshift.apply(arguments,["warn"]);_log.apply(this,arguments)},isInitializing:function(){return this.phase=="init"||this.phase=="postInit"},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return this.phase=="userEvent"},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},
reload:function(a){this._load(a)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(a){var b=document.getElementById(this.options.idPrefix+a);if(b)return b.dtnode?b.dtnode:null;var c=null;this.visit(function(b){if(b.data.key==a)return c=b,!1},!0);return c},getActiveNode:function(){return this.activeNode},reactivate:function(a){var b=this.activeNode;if(b)this.activeNode=null,b.activate(),a&&b.focus()},getSelectedNodes:function(a){var b=
[];this.tnRoot.visit(function(c){if(c.bSelected&&(b.push(c),a===!0))return"skip"});return b},activateKey:function(a){a=a===null?null:this.getNodeByKey(a);if(!a)return this.activeNode&&this.activeNode.deactivate(),this.activeNode=null;a.focus();a.activate();return a},loadKeyPath:function(a,b){var c=a.split(this.options.keyPathSeparator);c[0]===""&&c.shift();c[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),c.shift());a=c.join(this.options.keyPathSeparator);return this.tnRoot._loadKeyPath(a,
b)},selectKey:function(a,b){var c=this.getNodeByKey(a);if(!c)return null;c.select(b);return c},enableUpdate:function(a){if(this.bEnableUpdate==a)return a;(this.bEnableUpdate=a)&&this.redraw();return!a},count:function(){return this.tnRoot.countChildren()},visit:function(a,b){return this.tnRoot.visit(a,b)},_createFromTag:function(a,b){var c=this;b.find(">li").each(function(){var b=f(this),e=b.find(">span:first"),g=b.find(">a:first"),h=null,i=null;e.length?e=e.html():g.length?(e=g.html(),h=g.attr("href"),
i=g.attr("target")):(e=b.html(),g=e.search(/<ul/i),e=g>=0?f.trim(e.substring(0,g)):f.trim(e));g={title:e,isFolder:b.hasClass("folder"),isLazy:b.hasClass("lazy"),expand:b.hasClass("expanded"),select:b.hasClass("selected"),activate:b.hasClass("active"),focus:b.hasClass("focused"),noLink:b.hasClass("noLink")};if(h)g.href=h,g.target=i;if(b.attr("title"))g.tooltip=b.attr("title");if(b.attr("id"))g.key=b.attr("id");if(b.attr("data")&&(h=f.trim(b.attr("data")))){h.charAt(0)!="{"&&(h="{"+h+"}");try{f.extend(g,
eval("("+h+")"))}catch(j){throw"Error parsing node data: "+j+"\ndata:\n'"+h+"'";}}h=a.addChild(g);b=b.find(">ul:first");b.length&&c._createFromTag(h,b)})},_checkConsistency:function(){},_setDndStatus:function(a,b,c,d,e){a=a?f(a.span):null;b=f(b.span);if(!this.$dndMarker)this.$dndMarker=f("<div id='dynatree-drop-marker'></div>").hide().prependTo(f(this.divTree).parent());if(d==="after"||d==="before"||d==="over"){var g=b.position();switch(d){case "before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over");
this.$dndMarker.addClass("dynatree-drop-before");g.top-=8;break;case "after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-after");g.top+=8;break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),b.addClass("dynatree-drop-target"),g.left+=8}this.$dndMarker.css({left:g.left+"px",top:g.top+"px"}).show()}else b.removeClass("dynatree-drop-target"),this.$dndMarker.hide();
d==="after"?b.addClass("dynatree-drop-after"):b.removeClass("dynatree-drop-after");d==="before"?b.addClass("dynatree-drop-before"):b.removeClass("dynatree-drop-before");e===!0?(a&&a.addClass("dynatree-drop-accept"),b.addClass("dynatree-drop-accept"),c.addClass("dynatree-drop-accept")):(a&&a.removeClass("dynatree-drop-accept"),b.removeClass("dynatree-drop-accept"),c.removeClass("dynatree-drop-accept"));e===!1?(a&&a.addClass("dynatree-drop-reject"),b.addClass("dynatree-drop-reject"),c.addClass("dynatree-drop-reject")):
(a&&a.removeClass("dynatree-drop-reject"),b.removeClass("dynatree-drop-reject"),c.removeClass("dynatree-drop-reject"))},_onDragEvent:function(a,b,c,d,e,g){var h=this.options.dnd,i=null,j=f(b.span);switch(a){case "helper":c=f("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append(f(d.target).closest("a").clone());c.data("dtSourceNode",b);i=c;break;case "start":b.isStatusNode()?i=!1:h.onDragStart&&(i=h.onDragStart(b));i===!1?(this.logDebug("tree.onDragStart() cancelled"),
e.helper.trigger("mouseup"),e.helper.hide()):j.addClass("dynatree-drag-source");break;case "enter":i=h.onDragEnter?h.onDragEnter(b,c):null;i={over:i!==!1&&(i===!0||i==="over"||f.inArray("over",i)>=0),before:i!==!1&&(i===!0||i==="before"||f.inArray("before",i)>=0),after:i!==!1&&(i===!0||i==="after"||f.inArray("after",i)>=0)};e.helper.data("enterResponse",i);break;case "over":g=e.helper.data("enterResponse");a=null;if(g===!1)break;else if(typeof g==="string")a=g;else{var k=j.offset(),d={x:d.pageX-k.left,
y:d.pageY-k.top},j={x:d.x/j.width(),y:d.y/j.height()};g.after&&j.y>0.75?a="after":!g.over&&g.after&&j.y>0.5?a="after":g.before&&j.y<=0.25?a="before":!g.over&&g.before&&j.y<=0.5?a="before":g.over&&(a="over");h.preventVoidMoves&&(b===c?a=null:a==="before"&&c&&b===c.getNextSibling()?a=null:a==="after"&&c&&b===c.getPrevSibling()?a=null:a==="over"&&c&&c.parent===b&&c.isLastSibling()&&(a=null));e.helper.data("hitMode",a)}a==="over"&&h.autoExpandMS&&b.hasChildren()!==!1&&!b.bExpanded&&b.scheduleAction("expand",
h.autoExpandMS);a&&h.onDragOver&&(i=h.onDragOver(b,c,a));this._setDndStatus(c,b,e.helper,a,i!==!1);break;case "drop":if((a=e.helper.data("hitMode"))&&h.onDrop)h.onDrop(b,c,a,e,g);break;case "leave":b.scheduleAction("cancel");e.helper.data("enterResponse",null);e.helper.data("hitMode",null);this._setDndStatus(c,b,e.helper,"out",void 0);if(h.onDragLeave)h.onDragLeave(b,c);break;case "stop":j.removeClass("dynatree-drag-source");if(h.onDragStop)h.onDragStop(b);break;default:throw"Unsupported drag event: "+
a;}return i},cancelDrag:function(){var a=f.ui.ddmanager.current;a&&a.cancel()},lastentry:void 0};f.widget("ui.dynatree",{_init:function(){if(parseFloat(f.ui.version)<1.8)return this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create();this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){this.options.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",
p.version,this.options.debugLevel);this.options.event+=".dynatree";this.element.get(0);this.tree=new p(this);this.tree._load();this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function a(a){var a=f.event.fix(a||window.event),b=k(a.target);return b?b._onFocus(a):!1}this.unbind();var b="click.dynatree dblclick.dynatree";this.options.keyboard&&(b+=" keypress.dynatree keydown.dynatree");this.element.bind(b,function(a){var b=k(a.target);if(!b)return!0;var e=b.tree,f=e.options;e.logDebug("event(%s): dtnode: %s",
a.type,b);var h=e.phase;e.phase="userEvent";try{switch(a.type){case "click":return f.onClick&&f.onClick.call(e,b,a)===!1?!1:b._onClick(a);case "dblclick":return f.onDblClick&&f.onDblClick.call(e,b,a)===!1?!1:b._onDblClick(a);case "keydown":return f.onKeydown&&f.onKeydown.call(e,b,a)===!1?!1:b._onKeydown(a);case "keypress":return f.onKeypress&&f.onKeypress.call(e,b,a)===!1?!1:b._onKeypress(a)}}catch(i){e.logWarning("bind(%o): dtnode: %o, error: %o",a,b,i)}finally{e.phase=h}});b=this.tree.divTree;b.addEventListener?
(b.addEventListener("focus",a,!0),b.addEventListener("blur",a,!0)):b.onfocusin=b.onfocusout=a},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind();f.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind();f.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},
lastentry:void 0});if(parseFloat(f.ui.version)<1.8)f.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes";f.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,
onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onRender:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1E3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",
node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",
active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:2,lastentry:void 0};if(parseFloat(f.ui.version)<1.8)f.ui.dynatree.defaults=f.ui.dynatree.prototype.options;f.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,
lastentry:void 0};var q=!1,r=function(){q||(f.ui.plugin.add("draggable","connectToDynatree",{start:function(a,b){var c=f(this).data("draggable"),d=b.helper.data("dtSourceNode")||null;if(d)return c.offset.click.top=-2,c.offset.click.left=16,d.tree._onDragEvent("start",d,null,a,b,c)},drag:function(a,b){var c=f(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,g=k(a.target);a.target&&!g&&f(a.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>
0||(b.helper.data("dtTargetNode",g),e&&e!==g&&e.tree._onDragEvent("leave",e,d,a,b,c),g&&g.tree.options.dnd.onDrop&&(g===e?g.tree._onDragEvent("over",g,d,a,b,c):g.tree._onDragEvent("enter",g,d,a,b,c)))},stop:function(a,b){var c=f(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,g=a.type=="mouseup"&&a.which==1;g||logMsg("Drag was cancelled");e&&(g&&e.tree._onDragEvent("drop",e,d,a,b,c),e.tree._onDragEvent("leave",e,d,a,b,c));d&&d.tree._onDragEvent("stop",
d,null,a,b,c)}}),q=!0)}})(jQuery);
